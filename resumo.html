<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Resumo do Agendamento</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#ffffff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --accent:#111; --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);font-family:Inter,system-ui,sans-serif;color:var(--text)}
    .container{max-width:460px;margin:0 auto;padding:20px}

    h3{margin:0 0 14px;font-size:18px;font-weight:700}

    .card{border:1px solid var(--border);border-radius:var(--radius);padding:16px;margin-bottom:20px}
    .row{display:flex;justify-content:space-between;padding:6px 0;border-bottom:1px solid var(--border);font-size:15px}
    .row:last-child{border-bottom:none}
    .row span{color:var(--muted)}

    .footer-actions{margin-top:24px;display:flex;justify-content:space-between;align-items:center}
    .btn{padding:12px 16px;border-radius:999px;border:1px solid var(--border);font-weight:700;cursor:pointer}
    .btn.primary{background:var(--accent);color:#fff}
  </style>
</head>
<body>
  <div class="container">
    <h3>Revise e confirme seu agendamento</h3>

    <div class="card" id="resumo"></div>

    <div class="footer-actions">
      <button class="btn" id="btnBack">← Voltar</button>
      <button class="btn primary" id="btnConfirmar">Confirmar agendamento</button>
    </div>
  </div>

  <script>
    const btnBack=document.getElementById('btnBack');
    const btnConfirmar=document.getElementById('btnConfirmar');
    const resumo=document.getElementById('resumo');

    function loadResumo(){
      const services=JSON.parse(localStorage.getItem('booking_services')||'[]');
      const datetime=JSON.parse(localStorage.getItem('booking_datetime')||'{}');
      const profile=JSON.parse(localStorage.getItem('booking_profile')||'{}');

      const list=[
        {label:'Serviços',value:services.join(', ')||'-'},
        {label:'Data',value:datetime.date||'-'},
        {label:'Horário',value:datetime.time||'-'},
        {label:'Nome',value:profile.nome||'-'},
        {label:'Sobrenome',value:profile.sobrenome||'-'},
        {label:'Telefone',value:profile.telefone||'-'}
      ];

      resumo.innerHTML=list.map(r=>`<div class="row"><span>${r.label}</span><strong>${r.value}</strong></div>`).join('');
    }

    btnBack.onclick=()=>history.back();
    btnConfirmar.onclick=()=>{
      alert('Agendamento confirmado com sucesso!');
      console.log('Agendamento finalizado:',{
        services:JSON.parse(localStorage.getItem('booking_services')||'[]'),
        datetime:JSON.parse(localStorage.getItem('booking_datetime')||'{}'),
        profile:JSON.parse(localStorage.getItem('booking_profile')||'{}')
      });
      // Aqui faria POST para n8n / backend
    };

    loadResumo();
  </script>
</body>
</html>
